<h2 class="event-title">
    <img class="vector-img" src="../assets/images/hack-nights/meetings.svg" alt="image of a group of people" />
    Online Project Team Meetings
</h2>
<div class="mobile-dropdown">
    <div class="meetup-steps-2">
        <div id="img-content">
            <img class="step-img-2" src="../assets/images/hack-nights/org-projects.png" />
        </div>
        <div id="text-content-1">
            <p>
                Please review the listing of project team meeting times to find a
                project that fits your schedule. You are welcome to attend a project
                team meeting after you have completed
                <a href="https://www.hackforla.org/getting-started" target="_blank">Onboarding</a>.
            </p>
        </div>
    </div>
    <div class="days-display-1">
        <div id="userTimeZone" class="userTimeZone"></div>
        {% assign days-of-week =
        "Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday" | split: "," %}
        {% for day in days-of-week %}
        <div id="{{day}}">
            <h3 class="day-header-1">{{day}}</h3>
            <ul id="{{day}}-List" class="schedule-list-1"></ul>
        </div>
        {% endfor %}
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js" integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ==" crossorigin="anonymous"></script>
<script>

    /**
     * @param {Date} time - A valid javscript time string. Example:  "2020-05-13T02:00:00.000Z"
     * @return {String} - A time string formatted in the 12 hour format and converted to your timezone. Example: "10:00 PM"
    */
    function localeTimeIn12Format(time){
        
        return new Date(time)
            .toLocaleTimeString(
                {},
                {timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,hour12:true,hour:'numeric',minute:'numeric'}
            );
        
    }

    /**
     * Retrieves data from the wins excel sheet provided a valid excel url
     * @param  {URL} url 
     * @return {Object} response data
     */
    async function sendGetRequest(url){
        try {
            const resp =  await axios.get(url);
            return resp.data;
        } catch (err) {
            // Handle Error Here
            console.error(err);
        }
    }

    (async function main(){

        const response_data = await sendGetRequest('https://www.vrms.io/api/recurringevents');

        let obj = {0:[],1:[],2:[],3:[],4:[],5:[],6:[]}
        let obj1={}
        response_data.forEach(item=>{
            let mydate = new Date(item.date)
            let weekday = mydate.getDay();
            let options = {weekday:'long'};
            let day_of_week = new Intl.DateTimeFormat('en-US', options).format(mydate);


        //let day_key = (new Date(item.date)).getDay();
            if(!(day_of_week in obj1)){
                obj1[day_of_week] = [];
                obj1[day_of_week].push({"name":item.project.name,"dsc":item.description,"start":localeTimeIn12Format(item.startTime),"end":localeTimeIn12Format(item.endTime)})
            }
            else{
                obj1[day_of_week].push({"name":item.project.name,"dsc":item.description,"start":localeTimeIn12Format(item.startTime),"end":localeTimeIn12Format(item.endTime)})
            }

        
        })
        console.log(obj1)
    })()


</script>